<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoPOS Cloud v3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body data-theme="dark" class="h-screen overflow-hidden flex flex-col md:flex-row">

    <div id="login-screen" class="fixed inset-0 z-[60] flex items-center justify-center bg-slate-950">
        <div class="bg-slate-900 p-8 rounded-2xl border border-slate-800 w-full max-w-sm text-center">
            <h1 class="text-3xl font-black text-white mb-6">NEOPOS <span class="text-blue-500">v3</span></h1>
            <form onsubmit="handleLogin(event)" class="space-y-4">
                <input type="text" id="username" placeholder="Username" class="w-full bg-slate-950 text-white border border-slate-800 rounded-xl p-3 outline-none">
                <input type="password" id="password" placeholder="Password" class="w-full bg-slate-950 text-white border border-slate-800 rounded-xl p-3 outline-none">
                <button class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl">MASUK</button>
            </form>
        </div>
    </div>

    <aside class="hidden md:flex w-20 lg:w-64 theme-panel border-r flex-col justify-between p-4 z-20">
        <div>
            <div class="flex items-center gap-3 px-2 mb-8 text-blue-500">
                <i class="fa-solid fa-cube text-2xl"></i>
                <span class="hidden lg:block font-black text-xl theme-text">NEOPOS</span>
            </div>
            <nav class="space-y-2">
                <button onclick="nav('dashboard')" id="nav-dashboard" class="nav-item w-full text-left p-3 rounded-xl theme-text-muted hover:bg-slate-800 transition flex gap-3"><i class="fa-solid fa-house"></i> <span class="hidden lg:inline">Dashboard</span></button>
                <button onclick="nav('pos')" id="nav-pos" class="nav-item w-full text-left p-3 rounded-xl theme-text-muted hover:bg-slate-800 transition flex gap-3"><i class="fa-solid fa-cash-register"></i> <span class="hidden lg:inline">Kasir</span></button>
                <button onclick="nav('history')" id="nav-history" class="nav-item w-full text-left p-3 rounded-xl theme-text-muted hover:bg-slate-800 transition flex gap-3"><i class="fa-solid fa-clock-rotate-left"></i> <span class="hidden lg:inline">Riwayat</span></button>
                <button onclick="nav('stock')" id="nav-stock" class="nav-item w-full text-left p-3 rounded-xl theme-text-muted hover:bg-slate-800 transition flex gap-3"><i class="fa-solid fa-boxes-stacked"></i> <span class="hidden lg:inline">Stok</span></button>
                <button onclick="nav('settings')" id="nav-settings" class="nav-item w-full text-left p-3 rounded-xl theme-text-muted hover:bg-slate-800 transition flex gap-3"><i class="fa-solid fa-gear"></i> <span class="hidden lg:inline">Pengaturan</span></button>
            </nav>
        </div>
        <button onclick="location.reload()" class="w-full p-3 text-red-500 hover:bg-red-500/10 rounded-xl flex gap-3"><i class="fa-solid fa-power-off"></i> <span class="hidden lg:inline">Keluar</span></button>
    </aside>

    <main class="flex-1 relative overflow-hidden flex flex-col">
        
        <div class="md:hidden h-14 theme-panel border-b flex items-center justify-between px-4 shrink-0">
            <span class="font-black theme-text">NEOPOS</span>
            <button onclick="document.querySelector('aside').classList.toggle('hidden')" class="theme-text"><i class="fa-solid fa-bars"></i></button>
        </div>

        <div id="page-dashboard" class="page-content hidden p-6 overflow-y-auto h-full">
            <h2 class="text-2xl font-bold theme-text mb-6">Ringkasan Hari Ini</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div class="theme-panel p-6 rounded-2xl shadow-sm">
                    <p class="theme-text-muted text-sm">Pemasukan Hari Ini</p>
                    <h3 id="dash-income" class="text-3xl font-black text-emerald-500">Rp 0</h3>
                </div>
                <div class="theme-panel p-6 rounded-2xl shadow-sm">
                    <p class="theme-text-muted text-sm">Barang Terjual</p>
                    <h3 id="dash-sold" class="text-3xl font-black text-blue-500">0</h3>
                </div>
                <div class="theme-panel p-6 rounded-2xl shadow-sm">
                    <p class="theme-text-muted text-sm">Total Transaksi</p>
                    <h3 id="dash-trx" class="text-3xl font-black text-purple-500">0</h3>
                </div>
            </div>
            <div class="theme-panel p-6 rounded-2xl">
                <h3 class="font-bold theme-text mb-4">Transaksi Terakhir</h3>
                <div id="dash-recent-list" class="space-y-3"></div>
            </div>
        </div>

        <div id="page-pos" class="page-content hidden flex-1 flex flex-col md:flex-row h-full overflow-hidden">
            <div class="flex-1 flex flex-col h-full overflow-hidden">
                <header class="h-16 theme-panel border-b flex items-center px-4 gap-3 shrink-0">
                    <input id="search" onkeyup="renderProducts()" placeholder="Cari..." class="theme-input w-full rounded-full px-4 py-2 text-sm outline-none">
                </header>
                <div id="grid" class="flex-1 overflow-y-auto p-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 content-start"></div>
            </div>
            
            <div class="w-full md:w-80 lg:w-96 theme-panel border-l flex flex-col h-1/3 md:h-full z-10 shadow-xl">
                <div class="h-14 border-b flex items-center justify-between px-4 theme-text font-bold">
                    <span>Keranjang</span>
                    <span id="cartCount" class="bg-blue-600 text-white text-xs px-2 py-0.5 rounded">0</span>
                </div>
                <div id="cartList" class="flex-1 overflow-y-auto p-4 space-y-2"></div>
                
                <div class="p-4 border-t theme-panel space-y-3">
                    <div class="flex items-center gap-2">
                        <span class="text-xs theme-text-muted">Diskon (Rp):</span>
                        <input type="number" id="inputDiscount" oninput="renderCart()" class="theme-input flex-1 rounded px-2 py-1 text-sm text-right" placeholder="0">
                    </div>
                    <div class="flex justify-between items-end theme-text">
                        <span class="text-sm">Total Akhir</span>
                        <span id="totalDisplay" class="text-2xl font-black">Rp 0</span>
                    </div>
                    <button onclick="checkout()" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-500">BAYAR</button>
                </div>
            </div>
        </div>

        <div id="page-history" class="page-content hidden p-6 overflow-y-auto h-full">
            <h2 class="text-2xl font-bold theme-text mb-6">Riwayat Transaksi</h2>
            <div class="theme-panel rounded-2xl overflow-hidden border">
                <table class="w-full text-left text-sm theme-text">
                    <thead class="theme-panel border-b text-xs uppercase theme-text-muted">
                        <tr><th class="p-4">Waktu</th><th class="p-4">Total</th><th class="p-4 text-center">Aksi</th></tr>
                    </thead>
                    <tbody id="historyTableBody" class="divide-y"></tbody>
                </table>
            </div>
        </div>

        <div id="page-stock" class="page-content hidden p-6 overflow-y-auto h-full">
            <h2 class="text-2xl font-bold theme-text mb-6">Manajemen Stok</h2>
            <div class="theme-panel p-4 rounded-2xl mb-6 grid grid-cols-2 md:grid-cols-4 gap-3">
                <input id="newName" placeholder="Nama" class="theme-input rounded px-3 py-2">
                <input id="newPrice" type="number" placeholder="Harga" class="theme-input rounded px-3 py-2">
                <input id="newStock" type="number" placeholder="Stok" class="theme-input rounded px-3 py-2">
                <button onclick="addNewProduct()" class="bg-emerald-600 text-white rounded font-bold">TAMBAH</button>
            </div>
            <div class="theme-panel rounded-2xl overflow-hidden border">
                <table class="w-full text-left text-sm theme-text">
                    <thead class="theme-panel border-b text-xs uppercase theme-text-muted">
                        <tr><th class="p-4">Produk</th><th class="p-4">Stok</th><th class="p-4 text-center">Aksi</th></tr>
                    </thead>
                    <tbody id="stockTableBody" class="divide-y"></tbody>
                </table>
            </div>
        </div>

        <div id="page-settings" class="page-content hidden p-6 h-full">
            <h2 class="text-2xl font-bold theme-text mb-6">Pengaturan</h2>
            <div class="theme-panel p-6 rounded-2xl max-w-md">
                <div class="flex items-center justify-between mb-4">
                    <span class="theme-text font-bold">Tema Aplikasi</span>
                    <select onchange="setTheme(this.value)" id="themeSelect" class="theme-input px-4 py-2 rounded-lg">
                        <option value="dark">Gelap (Dark)</option>
                        <option value="light">Terang (Light)</option>
                    </select>
                </div>
                <p class="text-xs theme-text-muted">Pilih tampilan yang nyaman untuk mata Anda.</p>
            </div>
        </div>

    </main>

    <div id="print-area" class="hidden">
        <div class="text-center font-bold mb-2">NEOPOS STORE</div>
        <div class="border-b border-dashed border-black my-1"></div>
        <div class="flex justify-between text-xs"><span>NO: <span id="p-no"></span></span><span id="p-date"></span></div>
        <div class="border-b border-dashed border-black my-1"></div>
        <table class="w-full text-xs" id="p-items"></table>
        <div class="border-b border-dashed border-black my-1"></div>
        <div id="p-footer" class="text-xs font-bold space-y-1"></div>
    </div>

    <script src="kasir-script.js"></script>
</body>
</html>
